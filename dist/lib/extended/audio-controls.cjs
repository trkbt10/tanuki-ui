"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("react/jsx-runtime"),s=require("react"),ut="xtndcntlooptgl",dt="xtndcntbtn",mt="xtndcntico",O={loopToggle:ut,button:dt,icon:mt},ft=({className:r,isLooping:c=!1,disabled:n=!1,size:l="medium",onToggle:p,onRangeSelect:i,children:v})=>{const[u,f]=s.useState(!1),[M,x]=s.useState(null),$=s.useRef(null),b=s.useCallback(()=>{n||p==null||p(!c)},[n,c,p]),D=s.useCallback(o=>{if(o.altKey&&$.current){o.preventDefault(),f(!0);const S=$.current.getBoundingClientRect(),y=o.clientX-S.left;x(y)}},[]),g=s.useCallback(o=>{if(u&&M!==null&&$.current){const S=$.current.getBoundingClientRect(),y=o.clientX-S.left,N=S.width,k=Math.min(M,y)/N,w=Math.max(M,y)/N;w-k>.05&&(i==null||i(k,w))}},[u,M,i]),L=s.useCallback(()=>{f(!1),x(null)},[]);return s.useEffect(()=>{if(u)return document.addEventListener("mousemove",g),document.addEventListener("mouseup",L),()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",L)}},[u,g,L]),t.jsx("div",{ref:$,className:`${O.loopToggle} ${r||""}`,"data-selecting":u,children:t.jsx("button",{className:O.button,onClick:b,onMouseDown:D,disabled:n,"data-size":l,"data-looping":c,"aria-label":c?"Disable Loop":"Enable Loop",type:"button",title:"Loop (Alt+drag to select range)",children:v||t.jsx("svg",{viewBox:"0 0 24 24",className:O.icon,"aria-hidden":"true",children:t.jsx("path",{d:"M12 4V2L8 6l4 4V8c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 17.03 20 15.57 20 14c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v2l4-4-4-4v2z"})})})})},xt="xtndcntmet",bt="xtndcntbtnvWG",vt="xtndcnticoKaB",ht="xtndcntbeat",pt="xtndcntpulse",gt="xtndcntsettings",yt="xtndcntsetrow",kt="xtndcntinp",jt="xtndcntclsbtn",P={metronomeToggle:xt,button:bt,icon:vt,beat:ht,pulse:pt,settings:gt,settingRow:yt,input:kt,closeButton:jt},$t=({className:r,isActive:c=!1,disabled:n=!1,size:l="medium",bpm:p=120,timeSignature:i="4/4",onToggle:v,onBpmChange:u,onTimeSignatureChange:f,children:M})=>{const[x,$]=s.useState(!1),[b,D]=s.useState(p.toString()),[g,L]=s.useState(i),o=s.useCallback(()=>{n||v==null||v(!c)},[n,c,v]),S=s.useCallback(k=>{k.preventDefault(),!n&&$(!x)},[n,x]),y=s.useCallback(()=>{const k=parseInt(b,10);!isNaN(k)&&k>0&&k<=999&&(u==null||u(k))},[b,u]),N=s.useCallback(()=>{/^\d+\/\d+$/.test(g)&&(f==null||f(g))},[g,f]);return t.jsxs("div",{className:`${P.metronomeToggle} ${r||""}`,children:[t.jsx("button",{className:P.button,onClick:o,onContextMenu:S,disabled:n,"data-size":l,"data-active":c,"aria-label":c?"Disable Metronome":"Enable Metronome",type:"button",title:"Metronome (right-click for settings)",children:M||t.jsxs("svg",{viewBox:"0 0 24 24",className:P.icon,"aria-hidden":"true",children:[t.jsx("path",{d:"M12 2L4 20h16L12 2zm0 6l4 8H8l4-8z"}),c&&t.jsx("circle",{cx:"12",cy:"14",r:"2",className:P.beat})]})}),x&&t.jsxs("div",{className:P.settings,children:[t.jsxs("div",{className:P.settingRow,children:[t.jsx("label",{htmlFor:"bpm",children:"BPM:"}),t.jsx("input",{id:"bpm",type:"number",min:"1",max:"999",value:b,onChange:k=>D(k.target.value),onBlur:y,onKeyDown:k=>k.key==="Enter"&&y(),className:P.input})]}),t.jsxs("div",{className:P.settingRow,children:[t.jsx("label",{htmlFor:"timeSig",children:"Time:"}),t.jsx("input",{id:"timeSig",type:"text",value:g,onChange:k=>L(k.target.value),onBlur:N,onKeyDown:k=>k.key==="Enter"&&N(),className:P.input,pattern:"\\d+/\\d+"})]}),t.jsx("button",{className:P.closeButton,onClick:()=>$(!1),"aria-label":"Close settings",children:"Ã—"})]})]})},Mt="xtndcnttimrul",Nt="xtndcnttickcnt",Lt="xtndcnttick",Dt="xtndcntmajtic",St="xtndcntticklbl",Vt="xtndcntbeatvzy",wt="xtndcntdownbeat",Bt="xtndcntmarker",Xt="xtndcntmar",Rt="xtndcntcurtim",H={timelineRuler:Mt,tickContainer:Nt,tick:Lt,majorTick:Dt,tickLabel:St,beat:Vt,downbeat:wt,marker:Bt,markerLabel:Xt,currentTimeIndicator:Rt},Ct=({className:r,duration:c=300,currentTime:n=0,zoom:l=1,markers:p=[],showBeats:i=!0,showTime:v=!0,bpm:u=120,timeSignature:f="4/4",onSeek:M,onMarkerAdd:x,onMarkerRemove:$,onZoomChange:b,children:D})=>{const g=s.useRef(null),[L,o]=s.useState(!1),[S,y]=s.useState(0),[N,k]=s.useState(1),w=s.useCallback(a=>{const j=Math.floor(a/60),B=Math.floor(a%60),V=Math.floor(a%1*100);return`${j}:${B.toString().padStart(2,"0")}.${V.toString().padStart(2,"0")}`},[]),C=s.useCallback(a=>{const j=u/60;return a/j/c*100},[u,c]),E=s.useCallback(a=>{if(!g.current)return;const j=g.current.getBoundingClientRect(),h=(a.clientX-j.left)/j.width*c;M==null||M(h)},[c,M]),K=s.useCallback(a=>{if(!g.current)return;const j=g.current.getBoundingClientRect(),V=(a.clientX-j.left)/j.width;x==null||x(V)},[x]),X=s.useCallback(a=>{a.shiftKey&&(o(!0),y(a.clientX),k(l),a.preventDefault())},[l]),F=s.useCallback(a=>{if(L){const B=(a.clientX-S)/100,V=Math.max(.1,Math.min(10,N+B));b==null||b(V)}},[L,S,N,b]),e=s.useCallback(()=>{o(!1)},[]);s.useEffect(()=>{if(L)return document.addEventListener("mousemove",F),document.addEventListener("mouseup",e),()=>{document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",e)}},[L,F,e]);const d=()=>{const a=[],j=10/l,B=Math.floor(c/j);for(let V=0;V<=B;V++){const h=V*j,T=h/c*100,R=V%5===0;a.push(t.jsx("div",{className:`${H.tick} ${R?H.majorTick:""}`,style:{left:`${T}%`},children:R&&v&&t.jsx("span",{className:H.tickLabel,children:w(h)})},`tick-${V}`))}return a},m=()=>{if(!i)return null;const a=[],j=u/60,B=Math.floor(c*j),[V]=f.split("/").map(Number);for(let h=0;h<=B;h++){const T=C(h),R=h%V===0;a.push(t.jsx("div",{className:`${H.beat} ${R?H.downbeat:""}`,style:{left:`${T}%`}},`beat-${h}`))}return a};return t.jsx("div",{ref:g,className:`${H.timelineRuler} ${r||""}`,onClick:E,onDoubleClick:K,onMouseDown:X,"data-dragging":L,style:{transform:`scaleX(${l})`,transformOrigin:"left"},children:D||t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:H.tickContainer,children:[d(),m()]}),p.map(a=>t.jsx("div",{className:H.marker,style:{left:`${a.position*100}%`,borderColor:a.color||"#ff4081"},title:a.label,onClick:j=>{j.stopPropagation(),$==null||$(a.id)},children:a.label&&t.jsx("span",{className:H.markerLabel,children:a.label})},a.id)),t.jsx("div",{className:H.currentTimeIndicator,style:{left:`${n/c*100}%`}})]})})},Ft="xtndcntpla",Et="xtndcntplayheadrm1",Tt="xtndcnthdl",Kt="xtndcnttimdis",W={playheadContainer:Ft,playhead:Et,handle:Tt,timeDisplay:Kt},Yt=({className:r,position:c=0,duration:n=300,height:l="100%",color:p="#2196f3",showTime:i=!0,scrubSpeed:v=1,onSeek:u,onScrub:f,children:M})=>{const[x,$]=s.useState(!1),[b,D]=s.useState(!1),[g,L]=s.useState(0),[o,S]=s.useState(0),y=s.useRef(null),N=s.useRef(null),k=s.useCallback(X=>{const F=Math.floor(X/60),e=Math.floor(X%60);return`${F}:${e.toString().padStart(2,"0")}`},[]),w=s.useCallback(X=>{X.button===0&&($(!0),L(X.clientX),S(c),D(X.shiftKey),X.preventDefault())},[c]),C=s.useCallback(X=>{if(!x||!y.current)return;const F=y.current.getBoundingClientRect(),d=(X.clientX-g)/F.width;let m=o+d*n;b&&(m=o+d*n*v*.1),m=Math.max(0,Math.min(n,m)),b?f==null||f(m):u==null||u(m)},[x,g,o,n,b,v,u,f]),E=s.useCallback(()=>{$(!1),D(!1)},[]);s.useEffect(()=>{if(x)return document.addEventListener("mousemove",C),document.addEventListener("mouseup",E),document.body.style.cursor=b?"ew-resize":"grabbing",()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",E),document.body.style.cursor="auto"}},[x,b,C,E]);const K=c/n*100;return t.jsx("div",{ref:y,className:`${W.playheadContainer} ${r||""}`,style:{height:l},children:t.jsx("div",{ref:N,className:W.playhead,style:{left:`${K}%`,backgroundColor:p},onMouseDown:w,"data-dragging":x,"data-scrubbing":b,children:M||t.jsxs(t.Fragment,{children:[t.jsx("div",{className:W.handle}),i&&t.jsx("div",{className:W.timeDisplay,children:k(c)})]})})})},zt="xtndcntvolfad",Pt="xtndcnttracklo4",Ht="xtndcntfill",It="xtndcntthumb",qt="xtndcntscaleIF2",Ut="xtndcntscamar",At="xtndcntscalelbl",Wt="xtndcntvaldisiXm",U={volumeFader:zt,track:Pt,fill:Ht,thumb:It,scale:qt,scaleMark:Ut,scaleLabel:At,valueDisplay:Wt};function J({value:r,defaultValue:c,onChange:n,onChangeEnd:l}){const[p,i]=s.useState(r??c),v=r??p,u=r!==void 0;return{value:v,setValue:x=>{u||i(x),n==null||n(x)},setValueEnd:x=>{l==null||l(x)},isControlled:u}}function Q({onDragStart:r,onDragMove:c,onDragEnd:n,disabled:l=!1,cursor:p="ns-resize"}){const[i,v]=s.useState(!1),u=s.useCallback(x=>{l||(v(!0),r==null||r(x),x.preventDefault())},[l,r]),f=s.useCallback(x=>{i&&(c==null||c(x))},[i,c]),M=s.useCallback(()=>{i&&(v(!1),n==null||n())},[i,n]);return s.useEffect(()=>{if(i)return document.addEventListener("mousemove",f),document.addEventListener("mouseup",M),p&&(document.body.style.cursor=p),()=>{document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",M),p&&(document.body.style.cursor="auto")}},[i,f,M,p]),{isDragging:i,handleMouseDown:u}}function et({key:r,callback:c,disabled:n=!1,preventDefault:l=!0,target:p="document",condition:i}){const v=s.useCallback(u=>{const f=u;if(!r||n)return;const M=f.target;if(M.tagName==="INPUT"||M.tagName==="TEXTAREA")return;(f.key.toLowerCase()===r.toLowerCase()||f.code===r||r==="Space"&&f.code==="Space")&&(!i||i(f))&&(l&&f.preventDefault(),c())},[r,c,n,l,i]);s.useEffect(()=>{if(r&&!n){const u=p==="document"?document:document.body;return u.addEventListener("keydown",v),()=>{u.removeEventListener("keydown",v)}}},[r,n,v,p])}const st=r=>r===0?"0 dB":r>0?`+${r.toFixed(1)} dB`:`${r.toFixed(1)} dB`,nt=r=>r===0?"C":r>0?`${r}R`:`${Math.abs(r)}L`,_t=r=>{const c=Math.floor(r/60),n=Math.floor(r%60),l=Math.floor(r%1*1e3);return`${c.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}.${l.toString().padStart(3,"0")}`},Ot=r=>`${r.toFixed(1)} BPM`,Gt=r=>r>=1e3?`${(r/1e3).toFixed(1)}kHz`:`${r.toFixed(0)}Hz`,Jt=r=>`${Math.round(r)}%`,ct=(r,c,n)=>(r-c)/(n-c)*100,at=(r,c,n)=>r/100*(n-c)+c,_=(r,c,n)=>Math.max(c,Math.min(n,r)),Qt=({className:r,value:c,min:n=-60,max:l=12,defaultValue:p=0,disabled:i=!1,orientation:v="vertical",showScale:u=!0,showValue:f=!0,onChange:M,onChangeEnd:x,children:$})=>{const{value:b,setValue:D,setValueEnd:g}=J({value:c,defaultValue:p,onChange:M,onChangeEnd:x}),[L,o]=s.useState(!1),S=s.useRef(null),y=s.useRef(null),N=s.useCallback(e=>ct(e,n,l),[n,l]),k=s.useCallback(e=>at(e,n,l),[n,l]),w=s.useCallback((e,d)=>{if(!y.current)return;const m=y.current.getBoundingClientRect();let a;v==="vertical"?a=100-(d-m.top)/m.height*100:a=(e-m.left)/m.width*100,a=Math.max(0,Math.min(100,a));let j=k(a);if(L){const B=N(b),V=(a-B)*.1;j=k(B+V)}j=_(j,n,l),D(j)},[v,k,N,b,L,n,l,D]),{isDragging:C,handleMouseDown:E}=Q({onDragStart:e=>{o(e.ctrlKey||e.metaKey),w(e.clientX,e.clientY)},onDragMove:e=>{w(e.clientX,e.clientY)},onDragEnd:()=>{o(!1),g(b)},disabled:i}),K=s.useCallback(()=>{i||(D(p),g(p))},[i,p,D,g]),X=N(b),F=()=>{if(!u)return null;const e=[];return[12,6,0,-6,-12,-24,-48].forEach(m=>{if(m>=n&&m<=l){const a=N(m);e.push(t.jsx("div",{className:U.scaleMark,style:v==="vertical"?{bottom:`${a}%`}:{left:`${a}%`},children:t.jsx("span",{className:U.scaleLabel,children:m})},m))}}),t.jsx("div",{className:U.scale,children:e})};return t.jsx("div",{ref:S,className:`${U.volumeFader} ${r||""}`,"data-orientation":v,"data-disabled":i,"data-dragging":C,children:$||t.jsxs(t.Fragment,{children:[t.jsxs("div",{ref:y,className:U.track,onMouseDown:E,onDoubleClick:K,children:[t.jsx("div",{className:U.fill,style:v==="vertical"?{height:`${X}%`}:{width:`${X}%`}}),t.jsx("div",{className:U.thumb,style:v==="vertical"?{bottom:`${X}%`}:{left:`${X}%`}})]}),F(),f&&t.jsx("div",{className:U.valueDisplay,children:st(b)})]})})},Zt="xtndcntpanKnob",te="xtndcntknob",ee="xtndcntind",se="xtndcntcendot",ne="xtndcntscale",ce="xtndcntscamarlef",ae="xtndcntscamarcen",le="xtndcntscamarrig",re="xtndcntvaldis",I={panKnob:Zt,knob:te,indicator:ee,centerDot:se,scale:ne,scaleMarkLeft:ce,scaleMarkCenter:ae,scaleMarkRight:le,valueDisplay:re},oe=({className:r,value:c,min:n=-100,max:l=100,defaultValue:p=0,disabled:i=!1,size:v="medium",showValue:u=!0,onChange:f,onChangeEnd:M,children:x})=>{const{value:$,setValue:b,setValueEnd:D}=J({value:c,defaultValue:p,onChange:f,onChangeEnd:M}),[g,L]=s.useState(0),[o,S]=s.useState(0),y=s.useRef(null),N=s.useCallback(e=>{const d=l-n;return(e-n)/d*270-135},[n,l]),k=s.useCallback((e,d)=>{if(!y.current)return;const m=y.current.getBoundingClientRect(),a=m.left+m.width/2,j=m.top+m.height/2,B=e-a,V=d-j;let h=Math.atan2(V,B)*(180/Math.PI);h=(h+90+360)%360,h>315||h<45?h=h>315?h-360:h:h>=45&&h<=135?h=Math.max(-135,Math.min(135,h-90)):h>135&&h<=225?h=135:h=-135;const T=(h+135)/270;let R=n+T*(l-n);R=_(R,n,l),b(R)},[n,l,b]),w=s.useCallback(e=>{const m=l-n,a=e*m*.5/100;let j=o-a;j=_(j,n,l),b(j)},[o,n,l,b]),C=s.useCallback(e=>{if(!i&&(e.button===1||e.button===0&&e.ctrlKey)){b(p),D(p);return}},[i,p,b,D]),{isDragging:E,handleMouseDown:K}=Q({onDragStart:e=>{e.shiftKey?(L(e.clientY),S($)):(k(e.clientX,e.clientY),L(e.clientY),S($))},onDragMove:e=>{if(e.shiftKey){const d=e.clientY-g;w(d)}else k(e.clientX,e.clientY)},onDragEnd:()=>{D($)},disabled:i}),X=s.useCallback(e=>{C(e),e.button===0&&!e.ctrlKey&&K(e)},[C,K]),F=N($);return t.jsx("div",{ref:y,className:`${I.panKnob} ${r||""}`,"data-size":v,"data-disabled":i,"data-dragging":E,children:x||t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:I.knob,onMouseDown:X,style:{transform:`rotate(${F}deg)`},children:[t.jsx("div",{className:I.indicator}),t.jsx("div",{className:I.centerDot})]}),t.jsxs("div",{className:I.scale,children:[t.jsx("div",{className:I.scaleMarkLeft}),t.jsx("div",{className:I.scaleMarkCenter}),t.jsx("div",{className:I.scaleMarkRight})]}),u&&t.jsx("div",{className:I.valueDisplay,children:nt($)})]})})},ie="xtndcntsteseq",ue="xtndcnthdr",de="xtndcnttra",me="xtndcntstephdr",fe="xtndcnttrack",xe="xtndcnttracklbl",be="xtndcntclearbtn",ve="xtndcntstep",A={stepSequencer:ie,header:ue,trackLabelHeader:de,stepHeader:me,track:fe,trackLabel:xe,clearButton:be,step:ve},he=({className:r,steps:c=16,tracks:n=8,pattern:l,currentStep:p=-1,isPlaying:i=!1,trackLabels:v=[],onStepToggle:u,onPatternChange:f,children:M})=>{const[x,$]=s.useState(()=>Array(n).fill(null).map(()=>Array(c).fill(!1))),b=l||x,D=s.useCallback((L,o)=>{const S=!b[L][o];if(l)u==null||u(L,o,S);else{const y=b.map((N,k)=>k===L?N.map((w,C)=>C===o?S:w):N);$(y),f==null||f(y)}},[b,l,u,f]),g=s.useCallback(L=>{if(l)for(let o=0;o<c;o++)u==null||u(L,o,!1);else{const o=b.map((S,y)=>y===L?Array(c).fill(!1):S);$(o),f==null||f(o)}},[b,l,c,u,f]);return t.jsx("div",{className:`${A.stepSequencer} ${r||""}`,children:M||t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:A.header,children:[t.jsx("div",{className:A.trackLabelHeader}),Array.from({length:c},(L,o)=>t.jsx("div",{className:A.stepHeader,"data-current":p===o&&i,children:o%4===0?o/4+1:""},o))]}),Array.from({length:n},(L,o)=>t.jsxs("div",{className:A.track,children:[t.jsxs("div",{className:A.trackLabel,children:[t.jsx("span",{children:v[o]||`Track ${o+1}`}),t.jsx("button",{className:A.clearButton,onClick:()=>g(o),"aria-label":`Clear track ${o+1}`,children:"Ã—"})]}),Array.from({length:c},(S,y)=>{var N;return t.jsx("button",{className:A.step,"data-active":(N=b[o])==null?void 0:N[y],"data-current":p===y&&i,"data-beat":y%4===0,onClick:()=>D(o,y),"aria-label":`Track ${o+1}, Step ${y+1}`},y)})]},o))]})})},pe="xtndcntwavedi",ge="xtndcntcanvas",ye="xtndcntplayhead",G={waveformEditor:pe,canvas:ge,playhead:ye},ke=({className:r,waveformData:c=[],width:n=800,height:l=200,selectionStart:p,selectionEnd:i,playheadPosition:v=0,zoomLevel:u=1,onSelectionChange:f,onCut:M,onCopy:x,onPaste:$,onFade:b,children:D})=>{const[g,L]=s.useState(!1),[o,S]=s.useState(null),[y,N]=s.useState(null),k=s.useRef(null),w=s.useRef(null),C=s.useCallback(()=>{const e=k.current;if(!e||c.length===0)return;const d=e.getContext("2d");if(!d)return;d.clearRect(0,0,n,l);const m=Math.max(1,Math.floor(c.length/(n*u))),a=l/2;d.strokeStyle=getComputedStyle(e).getPropertyValue("--waveform-color")||"#4caf50",d.lineWidth=1,d.beginPath();for(let V=0;V<n;V++){const h=Math.floor(V*m);if(h<c.length){const T=c[h],R=a-T*a;V===0?d.moveTo(V,R):d.lineTo(V,R)}}d.stroke(),d.strokeStyle=getComputedStyle(e).getPropertyValue("--waveform-center-line")||"#666",d.beginPath(),d.moveTo(0,a),d.lineTo(n,a),d.stroke();const j=p??o,B=i??y;if(j!==null&&B!==null){const V=j/c.length*n,h=B/c.length*n;d.fillStyle=getComputedStyle(e).getPropertyValue("--selection-color")||"rgba(33, 150, 243, 0.3)",d.fillRect(V,0,h-V,l)}},[c,n,l,u,p,i,o,y]);s.useEffect(()=>{C()},[C]);const E=s.useCallback(e=>{if(!w.current)return;const d=w.current.getBoundingClientRect(),a=(e.clientX-d.left)/n*c.length;L(!0),S(a),N(a)},[n,c.length]),K=s.useCallback(e=>{if(!g||!w.current)return;const d=w.current.getBoundingClientRect(),m=e.clientX-d.left,a=Math.max(0,Math.min(c.length,m/n*c.length));if(N(a),o!==null){const j=Math.min(o,a),B=Math.max(o,a);f==null||f(j,B)}},[g,n,c.length,o,f]),X=s.useCallback(()=>{L(!1)},[]),F=s.useCallback(e=>{const d=p??o,m=i??y;if(!(d===null||m===null)&&(e.ctrlKey||e.metaKey))switch(e.key){case"x":e.preventDefault(),M==null||M(d,m);break;case"c":e.preventDefault(),x==null||x(d,m);break;case"v":e.preventDefault(),$==null||$(d);break;case"d":e.preventDefault(),x==null||x(d,m),$==null||$(m);break}},[p,i,o,y,M,x,$]);return t.jsx("div",{ref:w,className:`${G.waveformEditor} ${r||""}`,style:{width:n,height:l},onMouseDown:E,onMouseMove:K,onMouseUp:X,onKeyDown:F,tabIndex:0,children:D||t.jsxs(t.Fragment,{children:[t.jsx("canvas",{ref:k,width:n,height:l,className:G.canvas}),v!==null&&t.jsx("div",{className:G.playhead,style:{left:`${v/c.length*100}%`}})]})})},je="xtndcntautlan",$e="xtndcnthdrBxq",Me="xtndcntlblcc3",Ne="xtndcntvalue",Le="xtndcntsvg",De="xtndcntdeflin",Se="xtndcntautpat",Ve="xtndcntpoint",we="xtndcnthint",q={automationLane:je,header:$e,label:Me,value:Ne,svg:Le,defaultLine:De,automationPath:Se,point:Ve,hint:we},Be=({className:r,points:c=[],width:n=800,height:l=100,duration:p=10,minValue:i=0,maxValue:v=100,defaultValue:u=50,label:f="Parameter",color:M="#2196f3",onPointAdd:x,onPointUpdate:$,onPointRemove:b,children:D})=>{var F;const[g,L]=s.useState(null),[o,S]=s.useState(!1),y=s.useRef(null),N=s.useCallback(e=>{const d=v-i,m=(e-i)/d;return l-m*l},[i,v,l]),k=s.useCallback(e=>(l-e)/l*(v-i)+i,[i,v,l]),w=s.useCallback(e=>e/p*n,[p,n]),C=s.useCallback(e=>e/n*p,[p,n]),E=s.useCallback(e=>{if(!y.current||g)return;const d=y.current.getBoundingClientRect(),m=e.clientX-d.left,a=e.clientY-d.top;if(e.altKey){const j=C(m),B=k(a);x==null||x({time:j,value:B,curve:"linear"})}},[g,C,k,x]),K=s.useCallback((e,d)=>{e.stopPropagation(),L(d),S(!0),e.shiftKey&&(b==null||b(d),L(null),S(!1))},[b]),X=()=>{if(c.length===0)return null;const e=[...c].sort((m,a)=>m.time-a.time);if(e.length===1){const m=e[0],a=w(m.time),j=N(m.value);return`M 0,${N(u)} L ${a},${j} L ${n},${j}`}let d=`M ${w(e[0].time)},${N(e[0].value)}`;for(let m=1;m<e.length;m++){const a=e[m-1],j=e[m],B=w(a.time),V=N(a.value),h=w(j.time),T=N(j.value);if(j.curve==="bezier"){const R=(B+h)/2;d+=` Q ${R},${V} ${h},${T}`}else d+=` L ${h},${T}`}return d};return t.jsx("div",{className:`${q.automationLane} ${r||""}`,style:{width:n,height:l},children:D||t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:q.header,children:[t.jsx("span",{className:q.label,children:f}),t.jsx("span",{className:q.value,children:g?(F=c.find(e=>e.id===g))==null?void 0:F.value.toFixed(1):u.toFixed(1)})]}),t.jsxs("svg",{ref:y,width:n,height:l,className:q.svg,onClick:E,children:[t.jsx("line",{x1:0,y1:N(u),x2:n,y2:N(u),className:q.defaultLine}),t.jsx("path",{d:X()||void 0,fill:"none",stroke:M,strokeWidth:"2",className:q.automationPath}),c.map(e=>{const d=w(e.time),m=N(e.value);return t.jsx("circle",{cx:d,cy:m,r:"6",className:q.point,"data-selected":g===e.id,onMouseDown:a=>K(a,e.id),style:{fill:M}},e.id)})]}),t.jsx("div",{className:q.hint,children:"Alt+click to add point, Shift+click to remove"})]})})},Xe="xtndcntxyPad",Re="xtndcntpadArea",Ce="xtndcntgrilin",Fe="xtndcntgridvt",Ee="xtndcntgridhz",Te="xtndcntposition",Ke="xtndcntcro",Ye="xtndcntcroh",ze="xtndcntcrov",Pe="xtndcntlbls",He="xtndcntlblX",Ie="xtndcntlblY",z={xyPad:Xe,padArea:Re,gridLines:Ce,gridVertical:Fe,gridHorizontal:Ee,position:Te,crosshair:Ke,crosshairH:Ye,crosshairV:ze,labels:Pe,labelX:He,labelY:Ie},qe=({className:r,x:c,y:n,minX:l=0,maxX:p=100,minY:i=0,maxY:v=100,defaultX:u=50,defaultY:f=50,size:M=200,labelX:x="X",labelY:$="Y",disabled:b=!1,onChange:D,onChangeEnd:g,children:L})=>{const[o,S]=s.useState(c??u),[y,N]=s.useState(n??f),[k,w]=s.useState(!1),C=s.useRef(null),E=c??o,K=n??y,X=s.useCallback((h,T,R)=>(h-T)/(R-T)*100,[]),F=s.useCallback((h,T,R)=>h/100*(R-T)+T,[]),e=s.useCallback((h,T)=>{if(!C.current)return;const R=C.current.getBoundingClientRect(),lt=Math.max(0,Math.min(R.width,h-R.left)),rt=Math.max(0,Math.min(R.height,T-R.top)),ot=lt/R.width*100,it=100-rt/R.height*100,Z=F(ot,l,p),tt=F(it,i,v);c===void 0&&S(Z),n===void 0&&N(tt),D==null||D(Z,tt)},[c,n,l,p,i,v,F,D]),d=s.useCallback(h=>{b||(w(!0),e(h.clientX,h.clientY),h.preventDefault())},[b,e]),m=s.useCallback(h=>{k&&e(h.clientX,h.clientY)},[k,e]),a=s.useCallback(()=>{k&&(w(!1),g==null||g(E,K))},[k,E,K,g]),j=s.useCallback(()=>{b||(c===void 0&&S(u),n===void 0&&N(f),D==null||D(u,f),g==null||g(u,f))},[b,c,n,u,f,D,g]);s.useEffect(()=>{if(k)return document.addEventListener("mousemove",m),document.addEventListener("mouseup",a),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",a)}},[k,m,a]);const B=X(E,l,p),V=100-X(K,i,v);return t.jsx("div",{className:`${z.xyPad} ${r||""}`,style:{width:M,height:M},children:L||t.jsxs(t.Fragment,{children:[t.jsxs("div",{ref:C,className:z.padArea,onMouseDown:d,onDoubleClick:j,"data-disabled":b,"data-dragging":k,children:[t.jsxs("div",{className:z.gridLines,children:[t.jsx("div",{className:z.gridVertical}),t.jsx("div",{className:z.gridHorizontal})]}),t.jsx("div",{className:z.position,style:{left:`${B}%`,top:`${V}%`},children:t.jsxs("div",{className:z.crosshair,children:[t.jsx("div",{className:z.crosshairH}),t.jsx("div",{className:z.crosshairV})]})})]}),t.jsxs("div",{className:z.labels,children:[t.jsxs("div",{className:z.labelX,children:[x,": ",E.toFixed(1)]}),t.jsxs("div",{className:z.labelY,children:[$,": ",K.toFixed(1)]})]})]})})},Ue="xtndcntaudiobtn",Ae="xtndcntplavar",We="xtndcntstovar",_e="xtndcntrecvar",Oe="xtndcntpulseurJ",Ge="xtndcntmutvar",Je="xtndcntsolvar",Qe="xtndcnttglvar",Ze="xtndcnticosHY",ts="xtndcntlbl",Y={audioButton:Ue,playVariant:Ae,stopVariant:We,recordVariant:_e,pulse:Oe,muteVariant:Ge,soloVariant:Je,toggleVariant:Qe,icon:Ze,label:ts},es=({className:r,variant:c="toggle",isActive:n=!1,isArmed:l=!1,isRecording:p=!1,isSoloed:i=!1,disabled:v=!1,size:u="medium",shape:f="circle",keyBinding:M,onClick:x,onDoubleClick:$,onRightClick:b,children:D})=>{const g=s.useCallback(()=>{v||c==="mute"&&i||x==null||x()},[v,c,i,x]),L=s.useCallback(()=>{v||$==null||$()},[v,$]),o=s.useCallback(N=>{N.preventDefault(),!v&&(b==null||b())},[v,b]);et({key:M,callback:g,disabled:v});const S=()=>{switch(c){case"play":return Y.playVariant;case"stop":return Y.stopVariant;case"record":return Y.recordVariant;case"mute":return Y.muteVariant;case"solo":return Y.soloVariant;default:return Y.toggleVariant}},y=()=>{if(D)return D;switch(c){case"play":return t.jsx("svg",{viewBox:"0 0 24 24",className:Y.icon,children:n?t.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"}):t.jsx("path",{d:"M8 5v14l11-7z"})});case"stop":return t.jsx("svg",{viewBox:"0 0 24 24",className:Y.icon,children:t.jsx("rect",{x:"6",y:"6",width:"12",height:"12"})});case"record":return t.jsx("svg",{viewBox:"0 0 24 24",className:Y.icon,children:t.jsx("circle",{cx:"12",cy:"12",r:"8"})});case"mute":return t.jsx("span",{className:Y.label,children:"M"});case"solo":return t.jsx("span",{className:Y.label,children:"S"});default:return t.jsx("span",{className:Y.label,children:"T"})}};return t.jsx("button",{className:`${Y.audioButton} ${S()} ${r||""}`,onClick:g,onDoubleClick:L,onContextMenu:o,disabled:v||c==="mute"&&i,"data-size":u,"data-shape":f,"data-active":n,"data-armed":l,"data-recording":p,"data-soloed":i,"aria-label":`${c} button`,type:"button",children:y()})};exports.AudioButton=es;exports.AutomationLane=Be;exports.LoopToggle=ft;exports.MetronomeToggle=$t;exports.PanKnob=oe;exports.Playhead=Yt;exports.StepSequencer=he;exports.TimelineRuler=Ct;exports.VolumeFader=Qt;exports.WaveformEditor=ke;exports.XyPad=qe;exports.clampValue=_;exports.formatBpm=Ot;exports.formatDb=st;exports.formatFrequency=Gt;exports.formatPan=nt;exports.formatPercentage=Jt;exports.formatTime=_t;exports.percentageToValue=at;exports.useControlledValue=J;exports.useDragInteraction=Q;exports.useKeyboardShortcut=et;exports.valueToPercentage=ct;
